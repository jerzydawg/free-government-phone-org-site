---
import Layout from '../layouts/Layout.astro';
import { getSiteName, getKeyword, getDomain, getSiteURL, getKeywordId } from '../lib/site-config';
import { loadKeywordVariations } from '../lib/variations/shared/keyword-loader';

const siteName = getSiteName();
const keyword = getKeyword();
const domain = getDomain();
const siteURL = getSiteURL();
const keywordId = getKeywordId();

// Load keyword-specific variations with comprehensive error handling
let h1Content = { h1: 'All Free Government Phone Programs' };
let metaContent = { 
  title: `All Free Phone Programs - ${siteName}`,
  description: `Discover every free phone program available in 2025. From Lifeline to ACP, find the perfect Free Government Phone option that matches your needs and situation.`
};

try {
  const keywordModule = await loadKeywordVariations(keywordId);
  
  if (keywordModule && typeof keywordModule.getH1Variation === 'function' && typeof keywordModule.getMetaVariations === 'function') {
    try {
      h1Content = keywordModule.getH1Variation(domain, 'programs');
      metaContent = keywordModule.getMetaVariations(siteName, domain, 'programs');
      
      // Validate results - ensure it's not null/undefined/empty
      if (!h1Content || !h1Content.h1 || typeof h1Content.h1 !== 'string' || 
          h1Content.h1.trim() === '' || h1Content.h1 === 'null' || h1Content.h1 === 'undefined') {
        h1Content = { h1: 'All Free Government Phone Programs' };
      }
      if (!metaContent || !metaContent.title || !metaContent.description) {
        metaContent = { 
          title: `All Free Phone Programs - ${siteName}`,
          description: `Discover every free phone program available in 2025. From Lifeline to ACP, find the perfect Free Government Phone option that matches your needs and situation.`
        };
      }
    } catch (variationError: any) {
      console.error('Error calling variation functions:', variationError?.message || variationError);
    }
  }
} catch (e: any) {
  console.error('Failed to load keyword variations for programs page:', e?.message || e);
}

const title = metaContent.title;
const description = metaContent.description;
---

<Layout title={title} description={description}>
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "Complete Guide to Every Free Government Phone Program Available",
      "description": "Explore all available free phone programs including federal assistance, state options, and special provider offers to find your perfect match.",
      "author": {
        "@type": "Organization",
        "name": "Free Government Phone"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Free Government Phone",
        "url": "https://free-government-phone.org"
      },
      "datePublished": "2025-12-12",
      "dateModified": "2025-12-12"
    }
  </script>

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Which free phone program offers the best data allowance?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "ACP typically provides higher data allowances compared to traditional Lifeline service. Many ACP providers offer 10-15GB monthly data plans, while some Lifeline services provide 4-8GB depending on your carrier choice."
          }
        },
        {
          "@type": "Question",
          "name": "Can someone receive benefits from multiple phone assistance programs?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, eligible households can combine certain programs. You might qualify for both Lifeline and ACP benefits simultaneously, effectively reducing or eliminating monthly phone service costs entirely."
          }
        },
        {
          "@type": "Question",
          "name": "Do state-specific programs require different applications than federal ones?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "State programs often have separate application processes from federal assistance. While Lifeline and ACP use standardized federal applications, state programs typically require direct applications through local agencies or program administrators."
          }
        },
        {
          "@type": "Question",
          "name": "What happens if I move between states while receiving benefits?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Federal programs like Lifeline and ACP transfer with you when you relocate. However, state-specific benefits typically end when you move, requiring new applications in your destination state if similar programs exist there."
          }
        }
      ]
    }
  </script>

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "HowTo",
      "name": "How to Choose the Best Free Phone Program",
      "description": "Step-by-step process to evaluate and select the ideal free government phone program for your specific needs and circumstances.",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Assess Your Current Situation",
          "text": "Review your income level, participation in assistance programs, and household size to understand which programs you might qualify for."
        },
        {
          "@type": "HowToStep",
          "name": "Compare Data and Calling Features",
          "text": "Examine monthly data allowances, unlimited calling options, and text messaging limits across different program providers."
        },
        {
          "@type": "HowToStep",
          "name": "Research Provider Coverage",
          "text": "Verify network coverage in your area by checking provider coverage maps and reading local reviews about service quality."
        },
        {
          "@type": "HowToStep",
          "name": "Submit Your Application",
          "text": "Complete the application process through your chosen provider or program, ensuring all required documentation is included."
        }
      ]
    }
  </script>

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "GovernmentService",
      "name": "Free Government Phone Programs",
      "description": "Federal and state assistance programs providing free mobile phones and wireless service to eligible low-income households across America.",
      "provider": {
        "@type": "GovernmentOrganization",
        "name": "Federal Communications Commission"
      },
      "serviceType": "Telecommunications Assistance",
      "audience": "Low-income households and individuals"
    }
  </script>

  <!-- Breadcrumb Navigation -->
  <nav class="bg-gray-50 py-3">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-center space-x-2 text-sm">
        <a href="/" class="text-[var(--color-primary)] hover:underline">Home</a>
        <span class="text-gray-500">/</span>
        <span class="text-gray-600">All Programs</span>
      </div>
    </div>
  </nav>

  <main>
    <!-- Hero Section -->
    <section class="bg-gradient-to-br from-blue-50 to-indigo-100 py-16">
      <div class="max-w-4xl mx-auto px-4 text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">{h1Content.h1}</h1>
        <p class="text-xl text-gray-600 mb-8">Explore every available program to find the perfect free phone service that fits your needs and qualifications.</p>
        <a href="/apply" class="bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-gray-900 font-bold py-3 px-6 rounded-xl shadow-lg inline-block">Find Your Perfect Program</a>
        <p class="text-sm text-gray-600 mt-3">Compare all options â€¢ No credit checks required</p>
      </div>
    </section>

    <!-- Main Content -->
    <section class="py-16">
      <div class="max-w-4xl mx-auto px-4">
        
        <!-- Introduction -->
        <div class="mb-12">
          <p class="text-lg text-gray-700 mb-4">Multiple programs exist to help Americans access free phone service, each with unique benefits and requirements. Understanding your options helps you choose the best <strong>Free Government Phone</strong> program for your situation.</p>
          <p class="text-gray-600 mb-4">From federal assistance programs to state-specific initiatives, qualifying households can access free smartphones, unlimited calling, and generous data allowances without monthly bills or activation fees.</p>
        </div>

        <!-- Federal Programs Section -->
        <div class="mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">Major Federal Assistance Programs</h2>
          <div class="bg-blue-50 rounded-xl p-6 mb-6">
            <h3 class="text-xl font-semibold text-gray-900 mb-3">Lifeline Program</h3>
            <p class="text-gray-700 mb-3">America's longest-running phone assistance program provides monthly discounts on wireless service for qualifying low-income households. Participants receive free phones plus monthly service credits.</p>
            <ul class="list-disc list-inside text-gray-600 space-y-1">
              <li>Monthly service discount up to $9.25</li>
              <li>Free smartphone with qualifying plans</li>
              <li>Available in all 50 states and territories</li>
              <li>Works with major wireless carriers</li>
            </ul>
          </div>
          
          <div class="bg-green-50 rounded-xl p-6 mb-6">
            <h3 class="text-xl font-semibold text-gray-900 mb-3">Affordable Connectivity Program (ACP)</h3>
            <p class="text-gray-700 mb-3">This newer federal program offers enhanced benefits for internet and phone service, including higher monthly discounts and device subsidies for eligible participants.</p>
            <ul class="list-disc list-inside text-gray-600 space-y-1">
              <li>Monthly discount up to $30 on service</li>
              <li>Additional $75 toward device purchases</li>
              <li>Enhanced data allowances available</li>
              <li>Combinable with Lifeline benefits</li>
            </ul>
          </div>
          
          <p class="text-gray-600">Both programs serve different aspects of communication needs, and many households qualify for both simultaneously, maximizing their savings on phone service.</p>
        </div>

        <!-- State Programs Section -->
        <div class="mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-6">State-Level Phone Assistance Options</h2>
          <p class="text-gray-700 mb-4">Beyond federal programs, individual states often provide additional phone assistance through partnerships with local organizations and telecommunications companies. These programs supplement federal benefits.</p>
          
          <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div class="border rounded-lg p-4">
              <h4 class="font-semibold text-gray-900 mb-2">California LifeLine</h4>
              <p class="text-sm text-gray-600">Additional state discounts on top of federal Lifeline benefits,